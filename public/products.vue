<script setup>
import { ref, onMounted, onUnmounted } from 'vue';
import Header from "@public/components/header.vue";
import Footer from "@public/components/footer.vue";

import cash from "@/assets/images/account/cash-receipt.jpg"
import Cheque from "@/assets/images/account/cheque.jpg"
import Epargne from "@/assets/images/account/epargne2.jpg"
import Depot from "@/assets/images/account/depot.jpg"
import Money from "@/assets/images/account/money.jpg"
import Argent from "@/assets/images/account/argent.png"
import Interred from "@/assets/images/account/interrest.jpg"
import Guichet from "@/assets/images/account/guichet.jpg"
import Electronic from "@/assets/images/account/img.png"
import Order from "@/assets/images/account/autre.png"
import Refund from "@/assets/images/account/refund.png"
import Micro from "@/assets/images/account/micro.png"
// import Compte from "@/assets/images/account/compte1.jpg"
// import Image from "@/assets/images/account/image.jpg"
// import Image1 from "@/assets/images/account/img_1.png"
// import Image2 from "@/assets/images/account/img_2.png"
// import Image3 from "@/assets/images/account/img_3.png"
// import Image4 from "@/assets/images/account/img_4.png"
import Images from "@/assets/images/solution/cresafSolution.jpg"

const products = ref([
  {
    id: 1,
    title: "Compte ch√®que",
    // title: "üè¶ Compte ch√®que",
    subtitle: "Particulier, entreprise & salaire",
    subtitle2: "‚úÖ G√©rez vos finances au quotidien avec facilit√© et rapidit√© ",
    description: "Description du compte ch√®que...",
    image: Images
    // image: Image4
  },
  {
    id: 2,
    title: "Bon de caisse",
    subtitle: "Bon plan pour votre √©pargne",
    subtitle2: "üí∞ Investissez en toute s√©curit√© avec un rendement garanti chez CRESAF !",
    description: "Description du Bon de caisse...",
    image: Images
    // image: Image
  },
  {
    id: 3,
    title: "D√©p√¥t √† terme",
    description: "Description du d√©p√¥t √† terme...",
    subtitle: "Fructifier votre argent",
    subtitle2: "ü§ë Faites fructifier votre argent avec des taux avantageux et sans risque !",
    // subtitle2: "üíµ üí∏ü§ë Faites fructifier votre argent avec des taux avantageux et sans risque !",
    image: Images
    // image: Image1
  },
  {
    id: 4,
    title: "Compte d'√©pargne",
    subtitle: "Livret & Association",
    subtitle2: "üí≥ √âpargnez sereinement et faites grandir vos projets avec CRESAF !",
    description: "Description du compte d'√©pargne...",
    image: Images
    // image: Image2
  },
  {
    id: 5,
    title: "Collecte journali√®re",
    subtitle: "Vous suivre au quotidien",
    subtitle2: "üì• S√©curisez vos revenus quotidiens sans vous d√©placer",
    description: "Description de la collecte journali√®re...",
    image: Images
    // image: Image3
  },
  {
    id: 6,
    title: "Carte VISA",
    subtitle: "Vous ouvrir au monde",
    subtitle2: "üåç Payez et retirez de l‚Äôargent partout, en toute simplicit√© !",
    description: "Description de la carte VISA...",
    image: Images
    // image: Compte
  }
]);

const currentSlide = ref(0);
const autoPlayInterval = ref(null);

const nextSlide = () => {
  currentSlide.value = (currentSlide.value + 1) % products.value.length;
};

const prevSlide = () => {
  currentSlide.value = currentSlide.value === 0 ? products.value.length - 1 : currentSlide.value - 1;
};

// Auto-play du slider
const startAutoPlay = () => {
  autoPlayInterval.value = setInterval(nextSlide, 5000);
};

const stopAutoPlay = () => {
  if (autoPlayInterval.value) {
    clearInterval(autoPlayInterval.value);
  }
};


const currentSection = ref(1);

const scrollToSection = (sectionId) => {
  const section = document.getElementById(`section${sectionId}`);
  if (section) {
    section.scrollIntoView({ behavior: 'smooth' });
    currentSection.value = sectionId;
  }
};

// D√©marrer l'auto-play au montage du composant
onMounted(() => {

  startAutoPlay();
  const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const sectionId = parseInt(entry.target.id.replace('section', ''));
            if (!isNaN(sectionId)) {
              currentSection.value = sectionId;
            }
          }
        });
      },
      {
        threshold: 0.5,
        root: null,
        rootMargin: '0px'
      }
  );

  // Observer toutes les sections
  document.querySelectorAll('main[id^="section"]').forEach(section => {
    observer.observe(section);
  });
  // const observer = new IntersectionObserver(observerCallback, {
  //   threshold: 0.5
  // });
  //
  // document.querySelectorAll('section[id]').forEach(section => {
  //   observer.observe(section);
  // });
});

// Nettoyer l'intervalle lors du d√©montage
onUnmounted(() => {
  stopAutoPlay();
});

</script>

<template>
  <div class="flex flex-col min-h-screen">
    <Header />

    <!-- Hero Section avec slider -->
    <section class="relative h-screen">
      <div class="relative w-full h-full overflow-hidden">
        <transition-group name="fade">
          <div v-for="(product, index) in products"
               :key="product.id"
               v-show="currentSlide === index"
               class="absolute inset-0 cursor-pointer">
            <img :src="product.image"
                 :alt="product.title"
                 class="w-full h-full object-cover">
            <div class="absolute inset-0 bg-blue-700 bg-opacity-30">
              <div class="container mx-auto px-6 h-full flex items-center">
                <div class="text-white max-w-lg">
                  <h1 class="text-5xl font-accent mb-4">{{ product.title }}</h1>
                  <p class="text-xl font-accent">{{ product.subtitle2 }}</p>
                </div>
              </div>
            </div>
          </div>
        </transition-group>

        <!-- Contr√¥les du slider -->
        <div class="absolute inset-y-0 left-0 flex items-center">
          <button @click="prevSlide"
                  class="bg-white bg-opacity-30 hover:bg-opacity-50 rounded-r p-2">
            <span class="sr-only">Pr√©c√©dent</span>
            <!-- Ic√¥ne pr√©c√©dent -->
          </button>
        </div>

        <div class="absolute inset-y-0 right-0 flex items-center">
          <button @click="nextSlide"
                  class="bg-white bg-opacity-30 hover:bg-opacity-50 rounded-l p-2">
            <span class="sr-only">Suivant</span>
            <!-- Ic√¥ne suivant -->
          </button>
        </div>
      </div>
    </section>

    <!-- Sections des produits -->
    <main id="section1" class="bg-blue-950 px-8 py-12">
      <h2 class="text-white font-accent text-4xl w-full justify-center text-center pb-5">
        Compte ch√®que
      </h2>
      <p class="text-gray-300 font-primary text-lg w-full justify-start pb-10">
        Notre service de compte ch√®que √† destination des auto-entrepreneurs quel que soit le secteur d‚Äôactivit√©,
        permettra d‚Äôeffectuer les transactions bancaires courantes lies a leurs activit√©s.
      </p>
      <div class="lg:flex w-full min-h-screen gap-2 justify-center lg:px-10">
        <div class="flex w-full max-w-xl h-full lg:min-h-[38rem] ">
          <img :src="Cheque" alt="image" class="object-cover rounded-lg">
        </div>
        <div class="w-full max-w-xl flex flex-col">
          <h2 class="text-xl w-full lg:text-center font-semibold text-gray-300 lg:p-0 pt-5">
            Ce compte offre plusieurs avantages pour faciliter la gestion financi√®re des auto-entrepreneurs
          </h2>
          <div class="w-full flex justify-center lg:p-6 py-6 gap-2 lg:flex-nowrap flex-wrap">
            <div class="flex w-full lg:max-w-[12rem] flex-col bg-white border bg-opacity-10 justify-between p-4 rounded-lg lg:gap-0 gap-5">
              <h2 class="font-light text-white">Cr√©dit apr√®s 03 mois de fonctionnement</h2>
              <span class="text-lg font-bold text-white"> √† la demande du client </span>
            </div>
            <div class="flex w-full lg:max-w-[12rem] flex-col bg-white border bg-opacity-10 justify-between p-4 rounded-lg lg:gap-0 gap-5">
              <h2 class="font-light text-white">Mise en place d‚Äôun d√©couvert</h2>
              <span class="text-lg font-bold text-white"> a la demande du client</span>
            </div>
            <div class="flex w-full lg:max-w-[12rem] flex-col bg-white border bg-opacity-10 justify-between p-4 rounded-lg lg:gap-0 gap-5">
              <h2 class="font-light text-white">D√©posit minimum </h2>
              <span class="text-lg font-bold text-white"> 30.000 XCFA</span>
            </div>

          </div>
        </div>
      </div>

    </main>
    <main id="section2" class="bg-blue-50 px-8 py-12">
      <h2 class="text-green-600 font-accent text-4xl w-full justify-center text-center pb-5">
        Bon de caisse
      </h2>
      <p class="text-gray-800 font-primary text-lg w-full justify-center lg:text-center pb-10">
        Notre service en bon de caisse permet  aux entreprises et aux investisseurs d‚Äôeffectuer des placements de fonds en toute s√©curit√©
        sur une p√©riode minimale d‚Äôun an. Le placement a pour vocation  √† terme de g√©n√©rer d‚Äôimportants b√©n√©fices gr√¢ce √† des taux
        d‚Äôint√©r√™ts allant jusqu‚Äô√† 5%.
      </p>
      <div class="lg:flex w-full min-h-screen gap-2 justify-center lg:px-10">
        <div class="w-full lg:max-w-xl flex flex-col lg:py-16">
          <h2 class="text-xl w-full lg:text-center font-semibold text-gray-600">Les placements en bon de caisse offrent les conditions suivantes</h2>
          <div class="w-full flex justify-center lg:p-6 py-6 gap-2 lg:flex-nowrap flex-wrap">
            <div class="flex w-full lg:max-w-[12rem] flex-col bg-blue-950 border opacity-90 justify-between p-4 rounded-lg lg:gap-0 gap-5">
              <h2 class="font-light text-white ">d√©p√¥t minimum a l‚Äôouverture</h2>
              <span class="text-lg font-bold text-white">5.000.000 CFA</span>
            </div>
            <div class="flex w-full lg:max-w-[12rem] flex-col bg-blue-950 border opacity-90 justify-between p-4 rounded-lg lg:gap-0 gap-5">
              <h2 class="font-light text-white">taux de r√©mun√©ration</h2>
              <span class="text-lg font-bold text-white"> n√©gociable</span>
            </div>
            <div class="flex w-full lg:max-w-[12rem] flex-col bg-blue-950 border opacity-90 justify-between p-4 rounded-lg lg:gap-0 gap-5">
              <h2 class="font-light text-white">Int√©r√™t  pr√©compte ou post compte</h2>
              <span class="text-lg font-bold text-white"> √† la demande du client</span>
            </div>
          </div>
        </div>
        <div class="flex w-full max-w-xl h-full lg:min-h-[38rem]">
          <img :src="cash" alt="image" class="object-cover rounded-lg">
        </div>
      </div>

    </main>
    <main id="section3" class="bg-blue-950 px-8 py-12">
      <div class="container mx-auto">
        <h1 class="text-white w-full text-center font-accent text-4xl pb-6">D√©p√¥t √† terme </h1>
        <p class="w-full py-6 text-lg text-gray-300">
          Notre service de d√©p√¥t √† terme permet au souscripteur de d√©poser des fonds sur un compte bloqu√© afin de
          b√©n√©ficier d‚Äôint√©r√™ts sup√©rieurs au taux applicable sur un compte d‚Äô√©pargne classique. Le souscripteur
          pouvant √† tout moment disposer des int√©r√™ts g√©n√©r√©s par le compte.
        </p>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <div
              class="bg-white rounded-lg shadow-lg overflow-hidden transition-transform duration-300 hover:scale-105">
            <img :src="Money"
                 alt="Money"
                 class="w-full object-cover">
            <div class="p-6">
              <h3 class="text-xl font-bold mb-2">Minimum de d√©p√¥t</h3>
              <p class="text-gray-600 mb-4">5.000.000 XCFA</p>
            </div>
          </div>
          <div
              class="bg-white rounded-lg shadow-lg overflow-hidden transition-transform duration-300 hover:scale-105">
            <img :src="Depot"
                 alt="Depot a terme"
                 class="w-full object-cover">
            <div class="p-6">
              <h3 class="text-xl font-bold mb-2">Taux de r√©mun√©ration </h3>
              <p class="text-gray-600 mb-4">n√©gociable</p>
            </div>
          </div>
          <div
              class="bg-white rounded-lg shadow-lg overflow-hidden transition-transform duration-300 hover:scale-105">
            <img :src="Interred"
                 alt="Interred a terme"
                 class="w-full object-cover">
            <div class="p-6">
              <h3 class="text-xl font-bold mb-2">Taux d‚Äôint√©r√™ts</h3>
              <p class="text-gray-600 mb-4">Allant jusqu‚Äô√† 6%</p>
            </div>
          </div>
        </div>
      </div>
    </main>
    <main id="section4" class="lg:px-8 px-5 py-12">
      <h2 class="text-green-600 font-accent text-4xl w-full justify-center text-center pb-5">
        Compte d‚Äô√©pargne
      </h2>
      <p class="text-gray-800 font-primary text-lg w-full lg:px-8 px-4 pb-10">
        Notre service compte d‚Äô√©pargne association a √©t√© mis sur pied afin de permettre aux associations
        de prot√©ger leurs finances gr√¢ce √† des comptes d‚Äô√©pargnes fiables et s√©curis√©s.
      </p>
      <div class="lg:flex w-full lg:min-h-screen gap-2 justify-center lg:px-10 px-4">
        <div class="flex w-full lg:max-w-xl h-full lg:min-h-[38rem]">
          <img :src="Epargne" alt="image" class="object-cover rounded-lg">
        </div>
        <div class="w-full max-w-xl flex flex-col lg:pt-0 pt-5">
          <h2 class="text-xl w-full lg:text-center font-semibold text-gray-500">
            Les associations b√©n√©ficient des conditions suivantes pour leur compte d‚Äô√©pargne
          </h2>
          <div class="w-full flex justify-center lg:p-6 py-6 gap-2 lg:flex-nowrap flex-wrap">
            <div class="bg-blue-950 bg-opacity-90 flex w-full lg:max-w-[12rem] flex-col shadow border justify-between p-4 rounded-lg lg:gap-0 gap-5">
              <h2 class="font-light text-lg text-white">D√©p√¥t minimum √† l‚Äôouverture</h2>
              <span class="text-lg font-bold text-white"> 50.000 XCFA </span>
            </div>
            <div class="bg-blue-950 bg-opacity-90 flex w-full lg:max-w-[12rem] flex-col shadow border justify-between p-4 rounded-lg lg:gap-0 gap-5">
              <h2 class="font-light text-lg text-white">Taux d‚Äôint√©r√™t</h2>
              <span class="text-lg font-bold text-white">6% sur l‚Äôann√©e</span>
            </div>
          </div>
        </div>
      </div>
    </main>
    <main id="section5" class="bg-blue-950 px-8 py-12">
      <h1 class="text-white w-full text-center font-accent lg:text-4xl text-3xl pb-4">Collecte journali√®re </h1>
      <div class="container mx-auto">
        <p class="w-full py-6 text-lg text-gray-300">
          Collecte journali√®re/ Collecte journali√®re bloqu√©e
          Notre service de collecte journali√®re destin√© principalement aux travailleurs ind√©pendants
          ( commer√ßants ou autre)  permet de s√©curiser l‚Äôargent sans avoir √† se d√©placer.\
          Nos agents d√©ploy√©s sur le terrain collectent les fonds contre re√ßu et les d√©posent
          directement sur les  comptes de chaque souscripteur.
        </p>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <div
              class="bg-white rounded-lg shadow-lg overflow-hidden transition-transform duration-300 hover:scale-105">
            <img :src="Argent"
                 alt="Argent"
                 class="w-full object-cover">
            <div class="p-6">
              <h3 class="text-xl font-bold mb-2">Minimum d‚Äô√©pargne</h3>
              <p class="text-gray-600 mb-4">200-500fcfa/jour</p>
            </div>
          </div>
          <div
              class="bg-white rounded-lg shadow-lg overflow-hidden transition-transform duration-300 hover:scale-105">
            <img :src="Refund"
                 alt="Refund"
                 class="w-full object-cover">
            <div class="p-6">
              <h3 class="text-xl font-bold mb-2">D√©caissable</h3>
              <p class="text-gray-600 mb-4">fin du mois/ fin d‚Äôann√©e</p>
            </div>
          </div>
          <div
              class="bg-white rounded-lg shadow-lg overflow-hidden transition-transform duration-300 hover:scale-105">
            <img :src="Micro"
                 alt="Micro"
                 class="w-full object-cover">
            <div class="p-6">
              <h3 class="text-xl font-bold mb-2">Possibilit√© de micro-cr√©dit </h3>
            </div>
          </div>
        </div>
      </div>
    </main>
    <main id="section6" class="bg-blue-50 px-8 py-12">
      <div class="container mx-auto">
        <h2 class="text-green-600 font-accent text-4xl w-full justify-center text-center pb-5">
          Carte visa
        </h2>
        <p class="text-gray-800 font-primary text-lg w-full justify-center lg:text-center pb-10">
          Les cartes VISA du CRESAF offrent une solution s√©curis√©e pour effectuer des retraits aux guichets automatiques
          et r√©gler des achats de biens ou services, que ce soit via des terminaux de paiement √©lectronique (TPE) ou en ligne.
        </p>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <div class="bg-white opacity-90 hover:opacity-100 rounded-lg shadow-lg
          overflow-hidden transition-transform duration-300 hover:scale-105 p-2">
            <img :src="Guichet"
                 alt="Guichet"
                 class="w-full object-cover">
            <div class="p-6">
              <h3 class="text-xl font-bold mb-2">Guichet automatique de banque</h3>
            </div>
          </div>
          <div
               class="bg-white rounded-lg shadow-lg overflow-hidden transition-transform duration-300 hover:scale-105">
            <img :src="Electronic"
                 alt="Electronic"
                 class="w-full object-cover">
            <div class="p-6">
              <h3 class="text-xl font-bold mb-2">Terminaux de paiement √©lectronique </h3>
            </div>

          </div>
          <div
               class="bg-white rounded-lg shadow-lg overflow-hidden transition-transform duration-300 hover:scale-105">

            <img :src="Order"
                 alt="Order"
                 class="w-full object-cover">
            <div class="p-6">
              <h3 class="text-xl font-bold mb-2">Autres moyens de payement en ligne</h3>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Navigation lat√©rale -->
    <div class="fixed right-8 top-1/2 transform -translate-y-1/2 space-y-4 z-50">
      <a v-for="product in products" :key="product.id"
         :href="`#section${product.id}`"
         :class="[
           'block w-3 h-3 rounded-full transition-all duration-300',
           currentSection === product.id ? 'bg-white scale-125' : 'bg-white bg-opacity-50 hover:bg-opacity-75'
         ]"
         @click.prevent="scrollToSection(product.id)">
        <span class="sr-only">{{ product.title }}</span>
      </a>
    </div>

    <Footer />
  </div>
</template>

<style scoped>
.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.5s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}
</style>

